(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7652:function(e,t,l){Promise.resolve().then(l.bind(l,2456))},2456:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return h}});var r=l(7437),s=l(2265),i=l(6648),a=l(8472);let n="h-11 w-11 rounded-xl border border-pinkLight bg-white flex items-center justify-center hover:bg-pinkSoft hover:-translate-y-0.5 hover:shadow-md transition-all duration-200",o="h-5 w-5 object-contain";function d(e){let{urlYoutube:t,urlFacebook:l,urlInstagram:s,urlTwitter:i,urlTiktok:a}=e;return t||l||s||i||a?(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsx)("div",{className:"mb-2 text-sm font-extrabold text-blackSoft",children:"เชิญส่อง"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-3",children:[t&&(0,r.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:n,title:"YouTube",children:(0,r.jsx)("img",{src:"/social/youtube.png",alt:"YouTube",className:o})}),l&&(0,r.jsx)("a",{href:l,target:"_blank",rel:"noopener noreferrer",className:n,title:"Facebook",children:(0,r.jsx)("img",{src:"/social/facebook.png",alt:"Facebook",className:o})}),s&&(0,r.jsx)("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:n,title:"Instagram",children:(0,r.jsx)("img",{src:"/social/instagram.png",alt:"Instagram",className:o})}),i&&(0,r.jsx)("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:n,title:"Twitter / X",children:(0,r.jsx)("img",{src:"/social/twitter.png",alt:"Twitter",className:o})}),a&&(0,r.jsx)("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:n,title:"TikTok",children:(0,r.jsx)("img",{src:"/social/tiktok.png",alt:"TikTok",className:o})})]})]}):null}let c={june:"/artist/june.png",enjoy:"/artist/enjoy.png"};function m(e){return String(e).padStart(2,"0")}function u(e){return e.toLocaleDateString("th-TH",{month:"long",year:"numeric"})}function x(){var e,t,l;let{items:n,loading:o,error:x}=(0,a.l)(),[h,f]=(0,s.useState)(()=>{let e=new Date;return new Date(e.getFullYear(),e.getMonth(),1)}),[g,b]=(0,s.useState)("all"),[p,v]=(0,s.useState)(null),j=(0,s.useRef)(null),w=(0,s.useMemo)(()=>{let e=new Map;for(let s of n){var t,l,r;let i={...s,artists:null!==(t=s.artists)&&void 0!==t?t:[],meeting:null!==(l=s.meeting)&&void 0!==l&&l,images:null!==(r=s.images)&&void 0!==r?r:[]};e.has(i.date)||e.set(i.date,[]),e.get(i.date).push(i)}for(let[t,l]of Array.from(e))e.set(t,l.slice(0,5));return e},[n]),k=(0,s.useMemo)(()=>{if("all"===g)return w;let e=new Map;for(let[t,l]of Array.from(w.entries())){let r=l.filter(e=>(function(e,t){var l;return"all"===t||(null!==(l=e.artists)&&void 0!==l?l:[]).includes(t)})(e,g));r.length>0&&e.set(t,r)}return e},[w,g]),N=(0,s.useMemo)(()=>{var e,t;let l=(new Date(h.getFullYear(),h.getMonth(),1).getDay()+6)%7,r=new Date(h.getFullYear(),h.getMonth()+1,0).getDate(),s=[];for(let e=0;e<l;e++)s.push({isPad:!0});for(let l=1;l<=r;l++){let r=(t=new Date(h.getFullYear(),h.getMonth(),l),"".concat(t.getFullYear(),"-").concat(m(t.getMonth()+1),"-").concat(m(t.getDate())));s.push({date:r,day:l,list:null!==(e=k.get(r))&&void 0!==e?e:[],isPad:!1})}for(;s.length%7!=0;)s.push({isPad:!0});return s},[h,k]),y=(0,s.useMemo)(()=>Array.from(k.entries()).filter(e=>{let[t]=e;return function(e,t){let l="".concat(t.getFullYear(),"-").concat(m(t.getMonth()+1),"-");return e.startsWith(l)}(t,h)}).sort((e,t)=>{let[l]=e,[r]=t;return l.localeCompare(r)}),[k,h]),S=e=>{var t;return null===(t=e.images)||void 0===t?void 0:t[0]},M=e=>{var t,l;return null!==(l=null===(t=e.images)||void 0===t?void 0:t.slice(1,5))&&void 0!==l?l:[]};return(0,r.jsxs)("div",{className:"w-full h-screen mx-auto max-w-[1400px] px-3 md:px-6 py-6 flex flex-col text-blackSoft",children:[(0,r.jsx)("div",{className:"rounded-xl bg-white/95 backdrop-blur border border-pinkLight shadow-soft py-4 px-6",children:(0,r.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"inline-flex items-center gap-2 rounded-full bg-pinkSoft px-3 py-1 text-sm font-semibold text-blackSoft",children:"\uD83C\uDF80 EnjoyJune Scheduler"}),(0,r.jsxs)("h1",{className:"mt-3 text-xl font-extrabold tracking-tight text-blackSoft",children:["แพลนงานเดือน ",u(h)]})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-end",children:[(0,r.jsx)("div",{className:"flex w-full flex-col gap-2 sm:w-auto sm:flex-row sm:items-center",children:(0,r.jsxs)("div",{className:"flex w-full overflow-hidden rounded-2xl border border-pinkLight bg-white sm:w-auto",children:[(0,r.jsx)("button",{onClick:()=>b("all"),className:["flex-1 px-3 py-2 text-sm font-semibold","all"===g?"bg-pinkMain text-white":"hover:bg-pinkSoft text-blackSoft"].join(" "),children:"All"}),(0,r.jsxs)("button",{onClick:()=>b("june"),className:["flex-1 px-4 py-2 text-sm font-semibold flex items-center justify-center gap-2","june"===g?"bg-pinkMain text-white":"hover:bg-pinkSoft text-blackSoft"].join(" "),children:[(0,r.jsx)(i.default,{src:c.june,alt:"june",width:16,height:16})," ","June"]}),(0,r.jsxs)("button",{onClick:()=>b("enjoy"),className:["flex-1 px-4 py-2 text-sm font-semibold flex items-center justify-center gap-2","enjoy"===g?"bg-pinkMain text-white":"hover:bg-pinkSoft text-blackSoft"].join(" "),children:[(0,r.jsx)(i.default,{src:c.enjoy,alt:"enjoy",width:16,height:16})," ","Enjoy"]})]})}),(0,r.jsxs)("div",{className:"w-full sm:w-auto inline-flex items-center justify-between overflow-hidden rounded-2xl border border-pinkLight bg-white",children:[(0,r.jsx)("button",{onClick:()=>f(new Date(h.getFullYear(),h.getMonth()-1,1)),className:"px-4 py-2 font-semibold hover:bg-pinkSoft text-blackSoft",children:"‹"}),(0,r.jsx)("div",{className:"px-4 py-2 text-sm font-semibold text-blackSoft md:w-[140px] text-center",children:u(h)}),(0,r.jsx)("button",{onClick:()=>f(new Date(h.getFullYear(),h.getMonth()+1,1)),className:"px-4 py-2 font-semibold hover:bg-pinkSoft  text-blackSoft",children:"›"})]})]})]})}),(0,r.jsx)("div",{className:"mt-2 md:hidden",children:o?(0,r.jsx)("div",{className:"p-10 text-center",children:"กำลังโหลด..."}):0===y.length?(0,r.jsxs)("div",{className:"rounded-xl border border-pinkLight bg-white p-6 text-sm text-blackSoft/80 shadow-soft text-center",children:[(0,r.jsx)(i.default,{src:"/nodata.png",alt:"nodata",width:200,height:200,className:"mx-auto"}),(0,r.jsx)("label",{className:"text-lg",children:"ไม่มีงาน มีแต่ความน่ารักของดอลล่าห์"})]}):(0,r.jsx)("div",{className:"space-y-2 mb-6",children:y.map(e=>{let[t,l]=e;return(0,r.jsxs)("div",{className:"rounded-xl border border-pinkLight bg-white p-4 shadow-soft",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"text-base font-extrabold text-blackSoft",children:new Date("".concat(t,"T00:00:00")).toLocaleDateString("th-TH",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}),(0,r.jsxs)("div",{className:"text-sm text-blackSoft/70",children:[l.length," งาน"]})]}),(0,r.jsx)("div",{className:"mt-3 grid gap-3",children:l.map(e=>{var t;return(0,r.jsxs)("button",{onClick:()=>v(e),className:"overflow-hidden rounded-xl border border-pinkSoft bg-white text-left shadow-sm transition-all hover:-translate-y-1",children:[(0,r.jsxs)("div",{className:"relative h-36 bg-pinkSoft",children:[S(e)&&(0,r.jsx)("img",{src:S(e),className:"h-full w-full object-cover"}),(0,r.jsx)("div",{className:"absolute right-2 bottom-2 flex gap-1",children:null===(t=e.artists)||void 0===t?void 0:t.filter(e=>c[e]).map(e=>(0,r.jsx)("img",{src:c[e],className:"h-7 w-7 rounded-md border border-white bg-white/80"},e))})]}),(0,r.jsx)("div",{className:["p-4 leading-tight text-blackSoft",e.meeting?"font-extrabold":"font-normal"].join(" "),children:e.title})]},e.id)})})]},t)})})}),(0,r.jsx)("div",{className:"mt-2 hidden md:block flex-1 overflow-auto",ref:j,children:(0,r.jsxs)("div",{className:"h-full rounded-lg border border-pinkLight bg-white flex flex-col overflow-hidden",children:[(0,r.jsx)("div",{className:"grid grid-cols-7 bg-pinkSoft text-xs font-semibold text-blackSoft text-center",children:["จันทร์","อังคาร","พุธ","พฤหัส","ศุกร์","เสาร์","อาทิตย์"].map(e=>(0,r.jsx)("div",{className:"px-4 py-3",children:e},e))}),(0,r.jsx)("div",{className:"grid grid-cols-7 flex-1 min-h-0 border border-pinkSoft [grid-template-rows:repeat(6,minmax(0,1fr))]",children:N.map((e,t)=>(0,r.jsx)("div",{className:["h-full min-h-0 overflow-hidden flex flex-col border-b border-r border-pinkSoft",e.isPad?"bg-white/40":"bg-white",t%7==6?"border-r-0":""].join(" "),children:!e.isPad&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"px-3 pt-3 flex items-start justify-between",children:[(0,r.jsx)("div",{className:"text-sm font-extrabold text-blackSoft",children:m(e.day)}),e.list.length>0&&(0,r.jsxs)("span",{className:"text-[12px] font-semibold text-blackSoft/80",children:[e.list.length," งาน"]})]}),(0,r.jsx)("div",{className:"px-2 flex-1 min-h-0 overflow-auto no-scrollbar pt-0 pb-2 space-y-1",children:e.list.map(e=>{var t;return(0,r.jsxs)("button",{onClick:()=>v(e),className:"w-full overflow-hidden rounded-lg border border-pinkSoft bg-white text-left shadow-sm transition-all duration-200 ease-out hover:-translate-y-0.5 hover:shadow-md grid grid-cols-2 h-[65px]",children:[(0,r.jsxs)("div",{className:"relative w-full bg-pinkSoft",children:[S(e)&&(0,r.jsx)("img",{src:S(e),className:"absolute inset-0 h-full w-full object-cover"}),(0,r.jsx)("div",{className:"absolute right-0.5 bottom-0.5 flex gap-x-0.5",children:null===(t=e.artists)||void 0===t?void 0:t.filter(e=>c[e]).map(e=>(0,r.jsx)("img",{src:c[e],className:"h-4 w-4 rounded-md border border-white bg-white/80"},e))})]}),(0,r.jsx)("div",{className:["p-1 min-w-0 text-sm leading-tight text-blackSoft line-clamp-3",e.meeting?"font-extrabold":"font-normal"].join(" "),children:e.title})]},e.id)})})]})},t))})]})}),p&&(0,r.jsx)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/40 p-4",onClick:()=>v(null),children:(0,r.jsxs)("div",{className:"w-full max-w-lg overflow-hidden rounded-lg bg-white shadow-soft",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"relative h-56 bg-pinkSoft",children:[S(p)&&(0,r.jsx)("img",{src:S(p),className:"h-full w-full object-cover"}),(0,r.jsx)("button",{onClick:()=>v(null),className:"absolute right-3 top-3 rounded-full bg-white/90 px-3 py-2 font-extrabold text-blackSoft",children:"✕"})]}),(0,r.jsxs)("div",{className:"px-5 pb-5 pt-3",children:[(0,r.jsxs)("div",{className:"relative",children:[p.meeting&&(0,r.jsx)("span",{className:"absolute right-0 top-0 rounded-full border border-pinkLight bg-pinkSoft/70 px-3 py-1 text-xs",children:"รวมพล"}),(0,r.jsx)("div",{className:"text-lg text-blackSoft ".concat(p.meeting?"pt-8 font-extrabold":"font-normal"),children:p.title})]}),(null!==(l=null===(e=p.artists)||void 0===e?void 0:e.length)&&void 0!==l?l:0)>0&&(0,r.jsx)("div",{className:"mt-4 flex flex-wrap gap-2",children:(p.artists||[]).map(e=>(0,r.jsxs)("span",{className:"inline-flex items-center gap-2 rounded-full border border-pinkLight bg-pinkSoft/40 px-3 py-1 text-sm font-semibold",children:[c[e]&&(0,r.jsx)("img",{src:c[e],className:"h-5 w-5 rounded-lg",alt:e}),e.toUpperCase()]},e))}),(0,r.jsxs)("div",{className:"mt-4 text-blackSoft/80",children:[p.keyword&&(0,r.jsx)("div",{className:"mb-1",children:p.keyword}),null===(t=p.hashtag)||void 0===t?void 0:t.map(e=>(0,r.jsx)("div",{children:e},e))]}),M(p).length>0&&(0,r.jsx)("div",{className:"mt-5 grid grid-cols-12 gap-2",children:M(p).map(e=>(0,r.jsx)("div",{className:"col-span-6 md:col-span-3 aspect-[4/3] overflow-hidden rounded-2xl border border-pinkSoft",children:(0,r.jsx)("img",{src:e,className:"h-full w-full object-cover"})},e))}),(0,r.jsx)(d,{...p})]})]})})]})}function h(){return(0,r.jsx)(x,{})}},8472:function(e,t,l){"use strict";l.d(t,{l:function(){return o}});var r=l(2265);let s="https://docs.google.com/spreadsheets/d/e/2PACX-1vQvOnidB4yVNl_TOOzjwcW_yu845NxyVM1w5xC_u-4hDvZ9t30q7aqznADzGxy_l2UJx6HLoU9z3_Yu/pub?gid=0&single=true&output=tsv";function i(e){if(!e)return"";let t=e.trim();if(!t.includes("/"))return"https://drive.google.com/thumbnail?id=".concat(t,"&sz=w800");let l=t.match(/\/d\/([^/]+)/),r=l?l[1]:t;return"https://drive.google.com/thumbnail?id=".concat(r,"&sz=w800")}function a(e){return e?e.split(",").map(e=>e.trim()).filter(Boolean):[]}async function n(){if(!s)throw Error("Missing NEXT_PUBLIC_SHEET_TSV_URL");let e=await fetch(s,{cache:"no-store"});if(!e.ok)throw Error("Fetch failed: ".concat(e.status));let t=(await e.text()).split(/\r?\n/).filter(e=>e.trim().length>0),l=t[0].split("	").map(e=>e.trim()),r=e=>l.indexOf(e),n=new Map,o=[];for(let e=1;e<t.length;e++){var d,c;let l=t[e].split("	"),s=e=>{var t;let s=r(e);return s>=0?(null!==(t=l[s])&&void 0!==t?t:"").trim():""},m=s("date"),u=s("title");if(!m||!u)continue;let x=null!==(d=n.get(m))&&void 0!==d?d:0;n.set(m,x+1);let h="".concat(m,"-").concat(String(x+1).padStart(2,"0"));o.push({id:h,date:m,title:u,desc:s("desc")||void 0,images:(c=s("images"))?c.split(",").map(e=>e.trim()).filter(Boolean).map(i):[],artists:a(s("artists")),hashtag:a(s("hashtag")),meeting:function(e){let t=(null!=e?e:"").trim().toLowerCase();return"true"===t||"1"===t||"yes"===t}(s("meeting")),keyword:s("keyword")||void 0,urlYoutube:s("urlYoutube")||void 0,urlFacebook:s("urlFacebook")||void 0,urlInstagram:s("urlInstagram")||void 0,urlTwitter:s("urlTwitter")||void 0,urlTiktok:s("urlTiktok")||void 0})}return o}function o(){let[e,t]=(0,r.useState)([]),[l,s]=(0,r.useState)(!0),[i,a]=(0,r.useState)("");return(0,r.useEffect)(()=>{let e=!0;return(async()=>{try{let l=await n();if(!e)return;t(l)}catch(t){var l;if(!e)return;a(null!==(l=null==t?void 0:t.message)&&void 0!==l?l:"Unknown error")}finally{if(!e)return;s(!1)}})(),()=>{e=!1}},[]),{items:e,loading:l,error:i}}}},function(e){e.O(0,[648,971,23,744],function(){return e(e.s=7652)}),_N_E=e.O()}]);